dist: trusty
language: node_js

node_js:
- node

env:
  global:
    - ENVIRONMENT="development"
    - DOMAIN="festify-dev.firebaseapp.com"
    - FIREBASE_API_KEY
    - secure: Y7RwRLxvPCKye/Y8lfWECH70b4vW54zDwKzFiCUxQIXIDRp/B4egq0PZKt+Ctrqljq9ufwrCXo+khxC8AXlsTL2Lj+JcI+nuoQUwBhwy+UgUGiTd5U9DTIeRYs95NzbHVjQ5YMkyxxsU4orM+mH9neXxw2UuLNyEKYNk1qI1nhmivJKhP5orZgyQQwZZygaGkj3CDV8bSx0JU0BiHC5PcdgWMXWNZHABxA2XTObVJO9Bgzzk0ZiEgBhZlWlFj1USTdSdjco++q+Io2cIevnqRACm7COcbEI56AMuKLPUFJc2Ltaz2gs+3+gVZRfKad7VcFKamWGfXlhNMycOD6jrHIzTmBy7Blm+f187l07fWcUkTOjZIGwSV9qvmRbtD3TZKF66Jku09gbxKZdN92vQ2sRidRTYbFrGscYFysPnrJVnY0v7OEHMuawOSEi6uRc1P0Bb1wvhwqXTyMeADgWYH7SL2lWgG2RQzfriMikXGBv8pT8ivPV8dthkSFOwMil90ilp9na9RA+ttwvrITWB4WSUdTHXMCtEbnzVXqzWOQ41WnHP3HV80nz3ssiT0B+fn+TWWkWPhi03+BTjjgxY3RY0NPSqgAOYvAsX2HKjpryer3D1Ew0apj+kaZD9kPmRQ46KQ2rDyZIVPv/eFtSMQUfZ8W0wJA/2eyWp47UkfIA=
    - FIREBASE_AUTH_DOMAIN
    - secure: MNILJyKhjNx1TqnKa/ep2PHxR8dVXk2fTk0+pHd/pOzsOoCRR/kHZloD8sok+RIu+OblCmO6Z5Vw/ZU0GRyDidq5YtptZ4Gn2RGMOmVJ7J8u1Pb6f7L/7K9/cK7Le8DPCqLaJcfbwiedMZ6lXl4poErO4eGp4X/J+SNmoIte1zqAOZumWi8ZkqTCGTNQNPprelk9/nwzpsy/beyLtOF3G60w2gXgi51pEXlu9arpOLM3VbeG8hTQqkMiC7P0/KDrqnq7MuBRaognpO37vkdPkC/lYb1qeO5Twr9hBLpM8YHzKqil1xQBzn7KlXfKiYr+K5kDDULerTDtBf8oiIe3VlH5x9CEgxkFTM0VcYQXDnKrcIOb/cZ8AH9+9mxg1E/20r/nAR5JwkyT0j0B/FoMm28mDT71zTnSBxx/CYkcH4P7VjJiL+HQO0EilHZA2ziPqLP6uIM0M2vfvGswGMg6Hz6B0Xi3gEkp5te+Xd/4LGmwvov0F19fNhrcmG/J9XOK/xpglzYax/lT2Pebue+cRBaHTG4HPsNOqxHRBqlrx3xgBepclYWsTRokPJZaHSZwkxV5z9RuCK4a5qNeZmLsjI/TM2GC56nE/jjrF0jrhib/blD+Zo3VARLLC1ftBnn1P2L4HnmcP8GG6PvuCLopqPo90+watYqY24gOn7Bkl3Y=
    - FIREBASE_DB_URL
    - secure: MPuaqWzXhiuSCDCeBnrVYLq3nOKcDbx5FciCsE5vyfHXpU02raa66Fb+0/nWter9Dnv6Y/5HOREV6cMpBAr3/YJtxPUeatAUXEUWsYTWaffIl1ZyhVXTCP8yfmBPNeBYb/1gqQyO2wyDfoFK2SkCOSPRdDlyVFT/+H5YQS3TVcPiNG1zOqCG6Q9tM3vQ1YZnCz7XZS1lWyz8UQ9A3Qv0cN8fmcNBnjuKNc2LcSRH9JNmC6s6OEIb6Sgo/Aw8dgrbMYee9jIwKrzsJ1I+Tm4QpUumN4jRh/hxngyIoub2NbQkdcOprOgCLfr7zjAV+iDVuWoN34J4O7AzDzD2TcmE8vYV7/yIm9wyNoV/bMgo2OF9N+hxUa2gKYjCz6d3e6GdmfxSsPxLLNi39ATtpHj3exEj14YeTD4/nlRxWaXUnPhf9wwKqyGU2/Ji50NAiS6C+Ph7ztjJtbM+ruxEkDTsgu3gM5O5gpsZNRumj0eDa+bXGtStn7vP8LjJ/2c5HTdSUTgdnknVASNNMlXIV6sHj5JugGpxEGbdc0EwdxPuEgf71EaJnwgt9U0wIFhRPW4xyL0FLRwfnlPXcETVGHRN7bBM07fXczB36TrVOUpNYsXwztE6Fha10u8/Vht79j+nSxRgIcQz97L9B7/6Yw+DGzGlz2lx2w35lv/ue7uuHUI=
    - SPOTIFY_CLIENT_ID
    - secure: 0dv4M+crbqsA9xoyiv6aNlmEmdIWZsdzC2WemikNhcW1tZMgOlCj7iF8eLvksUiXAyYlUGBRwI+AvpyWkDD84ehGOgV0E/vxcuwIwzO3qMkpPcGNAAHvI4MBBLNhH7NCAaXMZGOK6pJ8lcU0NWEUTTsW4WPCGn0ngZ9CyV/ll7unGyFxX4e565+JGbGdbmZ+oaAt80U7Y7/s+7Ve2jXYWADgh+jYmqAt3Zu0iog67PLAiPjYzPAVHdfbHHlE0cJ3+m15FiTQ5DBJRQFkSTgGZ/JYRkxwo4DW5GDFz+1TKKdZt8wDsQ69dX2dNJmWynQY50QTLFw0W9ULWewPlKiXbGcNUU7sRj69y8Iq58NWMRAtHNaJA2fXzWn1Pr+6Dzw0iA7wPt0ok/URzH2Ob7utc9HueC8Y/oCtugh/AfeMe9ZEweQK0CunLcIC8SwK0zarrS4GH9jDBdImHLCHsmnZHjSlCMTMla04IN7CG3l1m0J6teXDgnZjhOwG18eskxYUD0AZ5bhQ/9biaoCkfAdhsou0lK+bfWol0tQKaMAbaZDWS2lkWabRhY4CiNJHjlVDrgxzIyz6gksIp3qGdHTlZsun6uJYBKbj3/49nf792Y5zVBQDe3o+1bucZQNUzG2JY++LkcKW8nXywpBvWYMG2tctrDD2hhqjOBoZ0N8Sj/w=
    - SENTRY_URL
    - secure: FJtcQFUB2rbsvc8W/tYrZs2DPdLUKyc+6E8jhwhfMGeZTu8VkS7D9jusQS8VmvvMvPTrL8Dx2jK1M3m0zlmh/6OACcEd7CHFfmynWi8jjpOR+O7v3I+S4uL+opLxEtpix4zPLU6XJtU5ugUf8v7UYmTac5LsczXoPjt55Gu6WGf6RkuVY59TWppfwWafmwOZImq69MWxH+elnoWBNkoVWY+GSAFjFqEsWAzaLqVe9VfUydUwCOWKuJVPuGmcQVJWnP74XOxZ51WPFZIMsWAAAvEMOgd6T4GjqIkmiUF8wRiGKwnMS7B5+S4FykGdlzfFeeqvZzsQGYjo4ZbUVfFKYrPEnoJJkPyPNHWUyN0lATmEsW1CTYrIGgxcWqguZbYVQsuoOMWMOQ5qPQwsc43N1/NluaExfbCdSiJFwGMFB2Sp9ekQBy3ReoT94kylAfR4rW+Pgkz4onyJqjQONfqQUT5+CLU61eicmqordmJEOGnBtKikCwr2mDmKBmujHcPMvsK+TzqzkfZcl8T+o/M5XGKSNhDAuY86ivNguvFpZZ9wdYSNGjv+FVlorOOJPbz2/dZmrg1BAcIrxUgWcFQBfsTLKw+UjlSUqLERuOILnQjstwZmChkba0AdQAY7tIyGVJh4qJ+5w4t+12qVv6ppllTd8d1IAySVpLexi0DXKOw=
    - SPOTIFY_TOKEN_SWAP_URL
    - secure: ZcWNQrm9L94ucprfdnqf13QUXV0g32HVEyM0v7XTFswV2dap/VYUWjnppFqd60EtqSli8A0PXXDo+vKEcdQg9MYOXa/zggOxC0CinXt/VUaQtZuHEp3QFCocHvtY/qLrn2CqWoVgBiyT5t/IrFHQ99nfhc35Bz6dTFT7Pui1Xz3YAX5YhpFsSekW3trmOokVTCkYLAkZZ71vgrPg4h3gRyKb7DWU1M2pZmQB471/mOZzT+gMLNfhKdmA5Gi5aOJ+FB2pJR5uH8NCet8TYcNoTFrHABbXrmZtEFQp0vnmU7AeDXuhVDJOBBT5DbZI921W0vq/GGIb4Ve7HUwh5aG3t9814fxREn/9LrF3yWRK33+2omzyQa71HxI6h0zitHSBfk44vnnk4u8SMsN0w9FKrPgUbqdhKQK65TKVT9WksTOKd+6QNx2eawVR3l6MJgwF3V1XihOxQQ6j40eYP1WTmMFlAJcwYS5iBtPYt7+w495rhN7xmBMPb6COlBf6/8NEUujE504d+mRfcfbHgvCaRIgwKEtoanQ+OgFOb7ZwThFejxkbB/rOkpZ2SEJJ0chv9EEqlxJD2wWy+FfN8mDLOTTtyowR+Hq2p2gQ2mUo9AZ6oHg8FwXGMEx9PzuXJrFJjj3/J/kNEBvbI5t4x4coYTVfRptfSTywo3nG3x9ZeCU=
    - SPOTIFY_TOKEN_SWAP_URL
    - secure: ec3wt7JBFMnIXwEixwVpsMh7CDfXcPj2LKjkVzUhdtULFC18dDgNeOgCIqGrwkSsTxJXwFKjBQ6E2MWilv8M9w6I6R4KZaoII1+0Zwd9+QD34DMHsb61sUNuMnsm3okcKDbjrmpKUrl7tfemDSZeocgXSvOAwSihge0vAUjqEiLjxJTj9zeT+mz4LzbefiHHDhyVFpACewApKnQiAgJoZ+AMm09diDrW9PrQZ4TDITKMjG9Hrd3uno30neFNmPbwIjgwyntUDjChhoFet/pUce4kAugWpaz/Dou0M/RYYlLuAvLNPODjQxCCFwIqIbWQLMML0rRjx0kRGmADy9OGtT9LWCM34z5BP+XPzNsbRy2dYzSsLqZoiDpudJHNuDnKi1BsYueK4Bglz7K0CnJ8OYYk4+3D5DeF0lu0dika/76mLF8D9JjQKJG6XbMXnOu1Z2K75A/E5F6GqbVSWNLmkEloB8tp0iHOgnwx1CqmNOjt0TijfJTI4u8oAnzkMw2HxfMCwRFjk8RZRSM0a4CvWXIcBNJ3+qillzFqWT2DUoV4X7xFmWEORflUr4YHR7mVlwRmR7kTXliy72Rb3M1EuBS8cqrYlBVW427sSYc7UE7mo/T9w9KD5wzfGNjuWcZ/8uWUI5ERWPpIeaDNphqWcZolSMffZ9qY4s1wEyu0kWQ=

cache:
  directories:
    - "$HOME/.cache/bower"
    - node_modules

before_script:
  - bower install

script:
  - gulp build

before_deploy:
  - (cd ./functions && npm install)

deploy:
  - provider: firebase
    skip_cleanup: true
    token:
      secure: "z9aBocF0dHE7/PvNHAsQ1tc6bDNbJX2ERkXP6g9IEQTWGaI9iHV7HxFQSBynoWaVZJjOSnSzPRKWbXZlzKKJ8NxR3KdkNT1ETP06FyanChN0JFxv1SLvsjuKuVlUdV9NzJ6WscQ7UbjCeJtszfJwN0iLHl8+pAWc/yaarEOQx5OfwIMTMpNVho4eH+sHx0BovcWDO8IHPZ6iSPEjrJrP4otlklG7yMuv0DeB2+f10eYH0WN5IX6fq4CFPM8uu6J0ZHKN0QYaiV1uF9dnL2YORuyYY1mUjnv8ZwjCzZmPBH480OzTxJC2IIfO/+cQsdB6A4v5wfz72+UuJIoZQNNYLI6KS1JCIeAojGBT3qubIJEE5Q49l8ES0GJA8SZB9npRtmPDE68t96rKGVj/ZLbK3cNgYP/G+Sdge5GI51WxItiHaGbah2vGtwuxBt42tJfb1AzxK5zb9X5f5HBi1y1FZLpEJvm88LUn7lEG4D7CiOuLP1mgEFh2FrboJK0yzWD+5wfaVV2PEHdH5CnvYA3S2g+1uAVYnvcKU6Nngfxk1k8K29DbJk1CA280uN4KsSA5HaAZ3KrTq6/IeVQoMfTRBhW0JXQ1xANrl5e0I3p5LuNFz6tFvDdf2nMDIwPLfo8LqY3s4aMA30dYJWjMj0yTy5gMrGHRjlf0XwtiUYeCiVc="
    project: "festify-dev"
    on:
      branch: develop
  - provider: firebase
    skip_cleanup: true
    token:
      secure: "z9aBocF0dHE7/PvNHAsQ1tc6bDNbJX2ERkXP6g9IEQTWGaI9iHV7HxFQSBynoWaVZJjOSnSzPRKWbXZlzKKJ8NxR3KdkNT1ETP06FyanChN0JFxv1SLvsjuKuVlUdV9NzJ6WscQ7UbjCeJtszfJwN0iLHl8+pAWc/yaarEOQx5OfwIMTMpNVho4eH+sHx0BovcWDO8IHPZ6iSPEjrJrP4otlklG7yMuv0DeB2+f10eYH0WN5IX6fq4CFPM8uu6J0ZHKN0QYaiV1uF9dnL2YORuyYY1mUjnv8ZwjCzZmPBH480OzTxJC2IIfO/+cQsdB6A4v5wfz72+UuJIoZQNNYLI6KS1JCIeAojGBT3qubIJEE5Q49l8ES0GJA8SZB9npRtmPDE68t96rKGVj/ZLbK3cNgYP/G+Sdge5GI51WxItiHaGbah2vGtwuxBt42tJfb1AzxK5zb9X5f5HBi1y1FZLpEJvm88LUn7lEG4D7CiOuLP1mgEFh2FrboJK0yzWD+5wfaVV2PEHdH5CnvYA3S2g+1uAVYnvcKU6Nngfxk1k8K29DbJk1CA280uN4KsSA5HaAZ3KrTq6/IeVQoMfTRBhW0JXQ1xANrl5e0I3p5LuNFz6tFvDdf2nMDIwPLfo8LqY3s4aMA30dYJWjMj0yTy5gMrGHRjlf0XwtiUYeCiVc="
    project: "festify-beta"
    on:
      branch: testing
  - provider: firebase
    skip_cleanup: true
    token:
      secure: "z9aBocF0dHE7/PvNHAsQ1tc6bDNbJX2ERkXP6g9IEQTWGaI9iHV7HxFQSBynoWaVZJjOSnSzPRKWbXZlzKKJ8NxR3KdkNT1ETP06FyanChN0JFxv1SLvsjuKuVlUdV9NzJ6WscQ7UbjCeJtszfJwN0iLHl8+pAWc/yaarEOQx5OfwIMTMpNVho4eH+sHx0BovcWDO8IHPZ6iSPEjrJrP4otlklG7yMuv0DeB2+f10eYH0WN5IX6fq4CFPM8uu6J0ZHKN0QYaiV1uF9dnL2YORuyYY1mUjnv8ZwjCzZmPBH480OzTxJC2IIfO/+cQsdB6A4v5wfz72+UuJIoZQNNYLI6KS1JCIeAojGBT3qubIJEE5Q49l8ES0GJA8SZB9npRtmPDE68t96rKGVj/ZLbK3cNgYP/G+Sdge5GI51WxItiHaGbah2vGtwuxBt42tJfb1AzxK5zb9X5f5HBi1y1FZLpEJvm88LUn7lEG4D7CiOuLP1mgEFh2FrboJK0yzWD+5wfaVV2PEHdH5CnvYA3S2g+1uAVYnvcKU6Nngfxk1k8K29DbJk1CA280uN4KsSA5HaAZ3KrTq6/IeVQoMfTRBhW0JXQ1xANrl5e0I3p5LuNFz6tFvDdf2nMDIwPLfo8LqY3s4aMA30dYJWjMj0yTy5gMrGHRjlf0XwtiUYeCiVc="
    project: "festify-79b08"
    on:
      branch: master

notifications:
  email: false
  slack:
    rooms:
      - secure: CB5ldw1lb5UhwTSikqyXQsfqTzfAAeoZ3sfrt5P4DTkP+FuUcAaj7n7sHwouuRdwmDrG7dcIHNywmvnVEmGFXwlmSy3Vcx/5hDtAfAm0YvUt1MUDm4NBRgOMqrSs8E75aZtAKlfV7eW1hTyS6idEH9CPJIgrd9ImG1SeBgz7ZmWdb5sZWg0OgUaWUeUerydhrsDQsuR5B721dvea249Y38FOhvGybTA8YDTViMEghuTOCKmZ/0Qaw1XavnbR/dxgVp4kxWJ6bG/vOHT0aB3Y17hckg97eGztHqjgBeF6Z6dn+Kt1rHW5trgjskmCCSfZiijRs4L1J7rGCcjAxc33BubMHOkXep59MM9gT78XCZadZkrQU2DFCq5icZPKaE4GLDFmR75CHIAh1jnr+IfQAzGILUs2LWzfabhmsy6m5QMDKNZJm5txN5X/cuZT2MDchC0BY0OElOVY6CBIpV5EJSl5XOcYGoTYXkdvqh1J7WnJmrAmlWwxQjLX+wpR1dutSo9kxfas9rB3zFCdFZ8Sj2aQj9kG5HLC9A7anj8EFs+ricHU/iprL+mrd8pFBWPsupVN6YE+xGAKFAoU0FZbuKLOfo1Et9coZwkchSTAWfJFhyJC54VOtquOtQ3Lhx8lmw3dfvGiXhQ+aetGO03c+e11XvgZpi2Aj9QOyxXYs8U=
    template:
      - "<%{build_url}|#%{build_number}> %{result}: <%{compare_url}|[%{repository_name}:%{branch}]> by %{author} (in %{duration})"
